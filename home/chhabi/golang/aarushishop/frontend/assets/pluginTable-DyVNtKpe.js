import{P as A}from"./PaginatioN-DQsouuFu.js";import{S as Q,f as M,p as U}from"./parseISO-NS-187vJ.js";import{_ as T,o as u,c,a as e,F as I,p as O,b as R,r as d,u as q,d as W,e as z,f as Y,g as m,t as r,h as f,i as G,j as H,k as J}from"./index-DTfqHd0M.js";const y=p=>(O("data-v-2bf78971"),p=p(),R(),p),K=y(()=>e("label",{for:"all"},"All",-1)),X=y(()=>e("label",{for:"lastYear"},"Last Year",-1)),Z=y(()=>e("label",{for:"thisYear"},"This Year ",-1)),ee=y(()=>e("label",{for:"lastMonth"},"Last Month",-1)),te=y(()=>e("label",{for:"thisMonth"},"This Month",-1)),ae=y(()=>e("label",{for:"lastWeek"},"Last Week ",-1)),se=y(()=>e("label",{for:"thisWeek"},"This Week ",-1)),oe=y(()=>e("label",{for:"today"},"Today",-1)),le={__name:"DateRange",emits:["dateRangeSelected"],setup(p,{emit:v}){const h=v,i=_=>{const{startDate:t,endDate:s}=C(_.target.value);h("dateRangeSelected",{startDate:t,endDate:s})},C=_=>{const t=new Date;let s,l,b,w,D;switch(_){case"lastYear":s=new Date(t.getFullYear()-1,0,1),l=new Date(t.getFullYear()-1,11,31);break;case"thisYear":s=new Date(t.getFullYear(),0,1),l=new Date;break;case"lastMonth":s=new Date(t.getFullYear(),t.getMonth()-1,1),l=new Date(t.getFullYear(),t.getMonth(),0);break;case"thisMonth":s=new Date(t.getFullYear(),t.getMonth(),1),l=new Date;break;case"lastWeek":b=new Date(t.getTime()-7*24*60*60*1e3),s=new Date(b.getFullYear(),b.getMonth(),b.getDate()),l=new Date(t.getFullYear(),t.getMonth(),t.getDate()-1);break;case"thisWeek":w=t.getDate()-t.getDay(),D=w+6,s=new Date(t.setDate(w)),l=new Date(t.setDate(D));break;case"today":s=new Date(t.getFullYear(),t.getMonth(),t.getDate()),l=new Date(t.getFullYear(),t.getMonth(),t.getDate());break;default:s="",l="";break}return{startDate:s,endDate:l}};return(_,t)=>(u(),c(I,null,[e("input",{id:"all",type:"radio",name:"timeframe",value:"all",checked:"",onChange:i},null,32),K,e("input",{id:"lastYear",type:"radio",name:"timeframe",value:"lastYear",onChange:i},null,32),X,e("input",{id:"thisYear",type:"radio",name:"timeframe",value:"thisYear",onChange:i},null,32),Z,e("input",{id:"lastMonth",type:"radio",name:"timeframe",value:"lastMonth",onChange:i},null,32),ee,e("input",{id:"thisMonth",type:"radio",name:"timeframe",value:"thisMonth",onChange:i},null,32),te,e("input",{id:"lastWeek",type:"radio",name:"timeframe",value:"lastWeek",onChange:i},null,32),ae,e("input",{id:"thisWeek",type:"radio",name:"timeframe",value:"thisWeek",onChange:i},null,32),se,e("input",{id:"today",type:"radio",name:"timeframe",value:"today",onChange:i},null,32),oe],64))}},ne=T(le,[["__scopeId","data-v-2bf78971"]]),P=p=>(O("data-v-b8d9b1ec"),p=p(),R(),p),re={class:"tablearea"},ue=P(()=>e("h1",null,"Purchase List",-1)),ie={class:"bar"},ce=P(()=>e("div",{class:"spacer"},null,-1)),de={class:"Table"},pe={key:0},_e={class:"material-symbols-outlined"},he={key:0},ve={class:"material-symbols-outlined"},ge={key:0},me={class:"material-symbols-outlined"},fe={key:0},ye={class:"material-symbols-outlined"},be={key:0},we={class:"material-symbols-outlined"},De={key:0},ke={class:"material-symbols-outlined"},Ce={key:0},$e={class:"material-symbols-outlined"},Pe={key:0},Me={class:"material-symbols-outlined"},Ye=P(()=>e("th",null,"Actions",-1)),Te=P(()=>e("td",null,[e("a",{href:"#"},"Details")],-1)),Se={__name:"TablePlug",setup(p){const v=d(null),h=d(1),i=d(""),C=d(1),_=d(5),t=d(0),s=d("PO"),l=d("asc"),b=d(""),w=d(""),D=d(""),L=q(),S=W(()=>v.value?b.value?v.value.filter(n=>Object.values(n).some(a=>String(a).toLowerCase().includes(b.value.toLowerCase()))):v.value:null),B=W(()=>{if(!S.value)return null;let n=S.value.slice();return s.value&&n.sort((a,o)=>{let $=l.value==="desc"?-1:1;return a[s.value]<o[s.value]?-1*$:a[s.value]>o[s.value]?1*$:0}),n}),k=async()=>{try{const a=await(await fetch(`http://localhost:8000/api/purchase/list?page=${h.value}&limit=${_.value}&search=${i.value}&datef=${w.value}&datee=${D.value}&sortBy=${s.value}&sortOrder=${l.value}`,{method:"GET",headers:{"Content-Type":"application/json",authorization:L.token},credentials:"include"})).json();a.data!==null?(a.data.forEach(o=>{o.Pdate=M(U(o.Pdate),"dd-MMM-yy")}),v.value=a.data):v.value=[],t.value=a.TotalRecords,C.value=Math.ceil(a.TotalRecords/_.value)}catch(n){console.error("Error fetching data:",n)}},x=({startDate:n,endDate:a})=>{if(n&&a){const o=F=>F instanceof Date&&!isNaN(F);if(!o(n)||!o(a)){console.error("Invalid date format");return}const $=M(n,"yyyy-MM-dd"),j=M(a,"yyyy-MM-dd");w.value=$,D.value=j}else w.value="",D.value="";h.value=1,k()},N=n=>{h.value=n,k()},E=n=>{i.value=n,h.value=1,k()},V=n=>{_.value=n,h.value=1,k()},g=n=>{s.value=n,l.value=l.value==="asc"?"desc":"asc",k()};return z(k),(n,a)=>(u(),c("div",re,[ue,e("div",ie,[Y(Q,{onSearch:E}),ce,Y(ne,{onDateRangeSelected:x})]),e("table",de,[e("thead",null,[e("tr",null,[e("th",{onClick:a[0]||(a[0]=o=>g("PO")),class:"sortable"},[m(" PO "),s.value==="PO"?(u(),c("span",pe,[e("span",_e,r(l.value==="asc"?"arrow_drop_up":"arrow_drop_down"),1)])):f("",!0)]),e("th",{onClick:a[1]||(a[1]=o=>g("Pdate")),class:"sortable"},[m(" Date "),s.value==="Pdate"?(u(),c("span",he,[e("span",ve,r(l.value==="asc"?"arrow_drop_up":"arrow_drop_down"),1)])):f("",!0)]),e("th",{onClick:a[2]||(a[2]=o=>g("Item_list")),class:"sortable"},[m(" Item List"),s.value==="Item_list"?(u(),c("span",ge,[e("span",me,r(l.value==="asc"?"arrow_drop_up":"arrow_drop_down"),1)])):f("",!0)]),e("th",{onClick:a[3]||(a[3]=o=>g("Description")),class:"sortable"},[m(" Description"),s.value==="Description"?(u(),c("span",fe,[e("span",ye,r(l.value==="asc"?"arrow_drop_up":"arrow_drop_down"),1)])):f("",!0)]),e("th",{onClick:a[4]||(a[4]=o=>g("Category")),class:"sortable"},[m(" Category"),s.value==="Category"?(u(),c("span",be,[e("span",we,r(l.value==="asc"?"arrow_drop_up":"arrow_drop_down"),1)])):f("",!0)]),e("th",{onClick:a[5]||(a[5]=o=>g("Qty")),class:"sortable"},[m(" Qty"),s.value==="Qty"?(u(),c("span",De,[e("span",ke,r(l.value==="asc"?"arrow_drop_up":"arrow_drop_down"),1)])):f("",!0)]),e("th",{onClick:a[6]||(a[6]=o=>g("Price")),class:"sortable"},[m(" Price"),s.value==="Price"?(u(),c("span",Ce,[e("span",$e,r(l.value==="asc"?"arrow_drop_up":"arrow_drop_down"),1)])):f("",!0)]),e("th",{onClick:a[7]||(a[7]=o=>g("User")),class:"sortable"},[m(" User"),s.value==="User"?(u(),c("span",Pe,[e("span",Me,r(l.value==="asc"?"arrow_drop_up":"arrow_drop_down"),1)])):f("",!0)]),Ye])]),e("tbody",null,[(u(!0),c(I,null,G(B.value,o=>(u(),c("tr",{key:o.PO},[e("td",null,r(o.PO),1),e("td",null,r(o.Pdate),1),e("td",null,r(o.item_list),1),e("td",null,r(o.description),1),e("td",null,r(o.category),1),e("td",null,r(o.qty),1),e("td",null,r(o.price),1),e("td",null,r(o.user),1),Te]))),128))])]),Y(A,{"current-page":h.value,"total-page-count":C.value,"per-page":_.value,totalRecords:t.value,onPageChange:N,onPerPageChange:V},null,8,["current-page","total-page-count","per-page","totalRecords"])]))}},Fe=T(Se,[["__scopeId","data-v-b8d9b1ec"]]),We={components:{TablePlug:Fe}};function Ie(p,v,h,i,C,_){const t=J("TablePlug");return u(),H(t)}const Be=T(We,[["render",Ie]]);export{Be as default};
